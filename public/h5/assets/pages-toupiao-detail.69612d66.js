import{j as t,x as e,l as i,y as n,o as a,c as o,w as s,i as l,f as r,g as u,n as c,a as p,b as f,F as d,z as g,p as m,h,A as I,k as b}from"./index-be7fe8a3.js";import{_}from"./uni-list-item.5aeffe2c.js";import{r as y}from"./uni-app.es.63fa007f.js";import{_ as v}from"./uni-list-chat.0ac62b4d.js";import{_ as j}from"./uni-card.431afcaf.js";import{_ as k}from"./uni-pagination.b2603419.js";import{_ as D}from"./uni-section.f9bbaa6a.js";import{_ as x}from"./uni-fab.ad1d44b0.js";import{p as C}from"./util.ff018e21.js";import{_ as z}from"./_plugin-vue_export-helper.1b428a4d.js";import"./uni-icons.43709c62.js";import"./uni-badge.81b1303d.js";const w=z({data:()=>({upUrl:"",voteInfo:{},disInfo:{},page:{height:0},actMenu:t().globalData.actMenu}),onLoad(e){this.voteInfo=JSON.parse(e.e),this.upUrl=t().globalData.upUrl,this.page.height=t().globalData.page.height-245},onShow(){this.getDiscuz(this.voteInfo.id,this.voteInfo.tag)},methods:{clickActMenu(t){e({url:this.actMenu[t.index].route})},changeDisInfo(){},clickDisInfoApply(n){t().globalData.myAuth.uid?b({url:"/pages/toupiao/discuz?e="+encodeURIComponent(JSON.stringify(n))}):(i({icon:"none",title:"当前登录已过期，正在跳转激活"}),e({url:"/pages/member/index"}))},showFullContent(t){n({showCancel:!1,title:this.disInfo.member[t.uid].name+"发表的内容:",content:t.content,success:function(t){t.confirm?console.log("用户点击确定"):t.cancel&&console.log("用户点击取消")}})},getDiscuz(e,n){let a=this,o={};o.id=e,o.tag=n,C(t().globalData.eyUrl+"discuz/getData",o).then((t=>{let e=t.data;"1"==e.code?a.disInfo=e:i({icon:"none",title:e.msg})}))}}},[["render",function(t,e,i,n,b,C){const z=g,w=y(m("uni-list-item"),_),A=y(m("uni-list-chat"),v),M=h,U=y(m("uni-card"),j),S=I,F=y(m("uni-pagination"),k),T=l,J=y(m("uni-section"),D),O=y(m("uni-fab"),x);return a(),o(T,{class:"container"},{default:s((()=>[r(J,{titleFontSize:"18px",title:b.voteInfo.title,"sub-title":b.voteInfo.intro,type:"line"},{right:s((()=>[r(z,{onClick:e[0]||(e[0]=t=>C.clickDisInfoApply(b.voteInfo)),class:"mini-btn",type:"primary",size:"mini",plain:"true"},{default:s((()=>[u("个人建议")])),_:1})])),default:s((()=>[r(w,{title:"相关讨论",rightText:b.disInfo.count},null,8,["rightText"]),r(S,{"scroll-y":"true",style:c("height:"+b.page.height+"px")},{default:s((()=>[b.disInfo.count>0?(a(!0),p(d,{key:0},f(b.disInfo.data,((t,e)=>(a(),o(A,{clickable:"",onClick:e=>C.showFullContent(t),key:e,"avatar-circle":!0,title:b.disInfo.member[t.uid].name,avatar:b.upUrl+b.disInfo.member[t.uid].avatar,note:t.content,time:t.created_at.substring(5,16)},null,8,["onClick","title","avatar","note","time"])))),128)):(a(),o(U,{key:1,style:{"background-color":"wheat"}},{default:s((()=>[r(M,{class:"uni-h6"},{default:s((()=>[u("尚未有人发表内容.")])),_:1})])),_:1}))])),_:1},8,["style"]),r(T,{style:{padding:"15px"}},{default:s((()=>[r(F,{onChange:C.changeDisInfo,total:b.disInfo.count,pageSize:10},null,8,["onChange","total"])])),_:1})])),_:1},8,["title","sub-title"]),r(O,{ref:"fab",content:b.actMenu,onTrigger:C.clickActMenu},null,8,["content","onTrigger"])])),_:1})}],["__scopeId","data-v-a1cb530e"]]);export{w as default};
