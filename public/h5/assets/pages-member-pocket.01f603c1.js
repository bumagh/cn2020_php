import{o as e,c as t,w as a,r as s,n,f as i,g as l,t as o,d as r,e as u,h as d,i as c,B as p,E as m,j as f,l as y,p as h,I as _,z as g}from"./index-be7fe8a3.js";import{_ as k}from"./_plugin-vue_export-helper.1b428a4d.js";import{r as b}from"./uni-app.es.63fa007f.js";import{_ as x}from"./uni-section.f9bbaa6a.js";import{p as j}from"./util.ff018e21.js";const v=k({name:"uniGroup",emits:["click"],props:{title:{type:String,default:""},top:{type:[Number,String],default:10},mode:{type:String,default:"default"},stat:{type:Boolean,default:!1}},data:()=>({margin:!1,border:!1}),watch:{title(e){uni.report&&this.stat&&""!==e&&uni.report("title",e)}},created(){this.form=this.getForm(),this.form&&(this.margin=!0,this.border=this.form.border)},methods:{getForm(){let e=this.$parent,t=e.$options.name;for(;"uniForms"!==t;){if(e=e.$parent,!e)return!1;t=e.$options.name}return e},onClick(){this.$emit("click")}}},[["render",function(p,m,f,y,h,_){const g=d,k=c;return e(),t(k,{class:u(["uni-group",["uni-group--"+f.mode,h.margin?"group-margin":""]]),style:n({marginTop:`${f.top}px`})},{default:a((()=>[s(p.$slots,"title",{},(()=>[f.title?(e(),t(k,{key:0,class:"uni-group__title",style:n({"padding-left":h.border?"30px":"15px"})},{default:a((()=>[i(g,{class:"uni-group__title-text"},{default:a((()=>[l(o(f.title),1)])),_:1})])),_:1},8,["style"])):r("",!0)]),!0),i(k,{class:u(["uni-group__content",{"group-conent-padding":h.border}])},{default:a((()=>[s(p.$slots,"default",{},void 0,!0)])),_:3},8,["class"])])),_:3},8,["class","style"])}],["__scopeId","data-v-5056df2b"]]);const C=k({data:()=>({cashnumber:10,pocket:{cash:0,coin:0,res:0,point:0},payOptions:{}}),onLoad(){},onShow(){let e=p("myAuth")||{};Object.keys(e).length<1?m({url:"/pages/member/index"}):(f().globalData.myAuth=e,this.getPocket())},methods:{getPocket(){let e=this;j(f().globalData.eyUrl+"pocket/setInitPocket").then((t=>{let a=t.data;"1"==a.code?e.pocket=a.data:y({icon:"none",title:a.msg})}))},jsApiCall(){WeixinJSBridge.invoke("getBrandWCPayRequest",this.payOptions,(function(e){"get_brand_wcpay_request:ok"==e.err_msg?alert("支付成功"):"get_brand_wcpay_request:cancel"==e.err_msg?alert("用户取消支付"):alert("支付失败!请重试")}))},callpay(){"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",this.jsApiCall,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",this.jsApiCall),document.attachEvent("onWeixinJSBridgeReady",this.jsApiCall)):this.jsApiCall()},setAuth(){this.pocket.openid&&""!=this.pocket.openid||j(f().globalData.eyUrl+"weixin/oauth").then((e=>{let t=e.data;"1"==t.code?window.location.href=t.data:y({icon:"none",title:"授权异常"})}))},setWxpay(){if(this.cashnumber<.1)return void y({icon:"none",title:"充值金额过小。"});let e={},t=this;e.cash=this.cashnumber,j(f().globalData.eyUrl+"weixin/pay",e).then((e=>{let a=e.data;"1"==a.code?(t.payOptions=a.data,t.callpay()):y({icon:"none",title:a.msg})}))}}},[["render",function(s,n,r,u,p,m){const f=d,y=c,k=b(h("uni-group"),v),j=_,C=g,w=b(h("uni-section"),x);return e(),t(y,{class:"container"},{default:a((()=>[i(k,{title:"钱包明细",mode:"card"},{default:a((()=>[i(y,null,{default:a((()=>[l(" 贡献： "),p.pocket.point?(e(),t(f,{key:0,class:"number"},{default:a((()=>[l(o(p.pocket.point),1)])),_:1})):(e(),t(f,{key:1,class:"number"},{default:a((()=>[l("0")])),_:1}))])),_:1}),i(y,null,{default:a((()=>[l(" 金币： "),p.pocket.coin?(e(),t(f,{key:0,class:"number"},{default:a((()=>[l(o(p.pocket.coin),1)])),_:1})):(e(),t(f,{key:1,class:"number"},{default:a((()=>[l("0")])),_:1}))])),_:1}),i(y,null,{default:a((()=>[l(" 资源： "),p.pocket.res?(e(),t(f,{key:0,class:"number"},{default:a((()=>[l(o(p.pocket.res),1)])),_:1})):(e(),t(f,{key:1,class:"number"},{default:a((()=>[l("0")])),_:1}))])),_:1}),i(y,null,{default:a((()=>[l(" 冻结金币： "),p.pocket.coinfix?(e(),t(f,{key:0,class:"number"},{default:a((()=>[l(o(p.pocket.coinfix),1)])),_:1})):(e(),t(f,{key:1,class:"number"},{default:a((()=>[l("0")])),_:1}))])),_:1})])),_:1}),i(w,{title:"在线充值",type:"line"},{default:a((()=>[i(y,{class:"list"},{default:a((()=>[i(y,{class:"list-call"},{default:a((()=>[l(" 充值金额： "),i(j,{class:"sl-input",modelValue:p.cashnumber,"onUpdate:modelValue":n[0]||(n[0]=e=>p.cashnumber=e),type:"number",placeholder:"请输入充值额度"},null,8,["modelValue"])])),_:1})])),_:1}),""!=p.pocket.openid?(e(),t(y,{key:0},{default:a((()=>[i(C,{type:"primary",onClick:n[1]||(n[1]=e=>m.setWxpay())},{default:a((()=>[l("微信充值")])),_:1})])),_:1})):(e(),t(y,{key:1},{default:a((()=>[i(C,{type:"primary",onClick:n[2]||(n[2]=e=>m.setAuth())},{default:a((()=>[l("微信授权")])),_:1}),i(C,{type:"primary",disabled:"true",plain:"true",onClick:n[3]||(n[3]=e=>m.setWxpay())},{default:a((()=>[l("微信充值")])),_:1})])),_:1}))])),_:1})])),_:1})}],["__scopeId","data-v-e1b83f17"]]);export{C as default};
