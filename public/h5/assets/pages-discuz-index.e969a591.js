import{j as t,x as a,l as e,y as n,o as i,c as o,w as s,i as l,f as c,n as u,a as r,b as p,F as d,g,p as f,h as m,A as h,z as _,k as y}from"./index-be7fe8a3.js";import{_ as b}from"./uni-list-chat.0ac62b4d.js";import{r as I}from"./uni-app.es.63fa007f.js";import{_ as k}from"./uni-card.431afcaf.js";import{_ as D}from"./uni-pagination.b2603419.js";import{_ as j}from"./uni-section.f9bbaa6a.js";import{_ as x}from"./uni-fab.ad1d44b0.js";import{p as C}from"./util.ff018e21.js";import{_ as z}from"./_plugin-vue_export-helper.1b428a4d.js";import"./uni-icons.43709c62.js";const v=z({data:()=>({upUrl:"",disInfo:{},page:{height:0},actMenu:t().globalData.actMenu}),onLoad(a){this.upUrl=t().globalData.upUrl,this.page.height=t().globalData.page.height-235},onShow(){this.getDiscuz()},methods:{clickActMenu(t){a({url:this.actMenu[t.index].route})},changeDisInfo(){},clickDisInfoApply(n){t().globalData.myAuth.uid?y({url:"/pages/discuz/apply"}):(e({icon:"none",title:"当前登录已过期，正在跳转激活"}),a({url:"/pages/member/index"}))},showFullContent(t){n({showCancel:!1,title:this.disInfo.member[t.uid].name+"发表的内容:",content:t.content,success:function(t){t.confirm?console.log("用户点击确定"):t.cancel&&console.log("用户点击取消")}})},getDiscuz(a,n){let i=this,o={};o.id=a,o.module="discuz",C(t().globalData.eyUrl+"discuz/getData",o).then((t=>{let a=t.data;"1"==a.code?i.disInfo=a:e({icon:"none",title:a.msg})}))}}},[["render",function(t,a,e,n,y,C){const z=I(f("uni-list-chat"),b),v=m,w=I(f("uni-card"),k),A=h,M=I(f("uni-pagination"),D),U=l,F=I(f("uni-section"),j),S=_,L=I(f("uni-fab"),x);return i(),o(U,{class:"container"},{default:s((()=>[c(F,{titleFontSize:"18px",title:"网友留言",type:"line"},{default:s((()=>[c(A,{"scroll-y":"true",style:u("height:"+y.page.height+"px")},{default:s((()=>[y.disInfo.count>0?(i(!0),r(d,{key:0},p(y.disInfo.data,((t,a)=>(i(),o(z,{clickable:"",onClick:a=>C.showFullContent(t),key:a,"avatar-circle":!0,title:y.disInfo.member[t.uid].name,avatar:y.upUrl+y.disInfo.member[t.uid].avatar,note:t.content,time:t.created_at.substring(5,16)},null,8,["onClick","title","avatar","note","time"])))),128)):(i(),o(w,{key:1,style:{"background-color":"wheat"}},{default:s((()=>[c(v,{class:"uni-h6"},{default:s((()=>[g("尚未有人发表内容.")])),_:1})])),_:1}))])),_:1},8,["style"]),c(U,{style:{padding:"15px"}},{default:s((()=>[c(M,{onChange:C.changeDisInfo,total:y.disInfo.count,pageSize:10},null,8,["onChange","total"])])),_:1})])),_:1}),c(S,{onClick:a[0]||(a[0]=t=>C.clickDisInfoApply()),type:"primary",plain:"true"},{default:s((()=>[g("发布留言")])),_:1}),c(L,{ref:"fab",content:y.actMenu,onTrigger:C.clickActMenu},null,8,["content","onTrigger"])])),_:1})}],["__scopeId","data-v-986d6384"]]);export{v as default};
