import{j as e,B as t,x as a,D as l,l as s,H as n,o,a as i,f as r,w as m,F as u,i as d,z as g,g as f,I as c}from"./index-be7fe8a3.js";import{g as h,p}from"./util.ff018e21.js";import{_ as b}from"./_plugin-vue_export-helper.1b428a4d.js";const y=b({data:()=>({member:{},upUrl:e().globalData.upUrl}),onShow(){let e=t("myAuth")||{};Object.keys(e).length<1?a({url:"/pages/member/index"}):this.getMemberInfo()},methods:{upMyAuth(t){for(var a in t)e().globalData.myAuth[a]=t[a];l("myAuth",e().globalData.myAuth)},getMemberInfo(){let t=this;h(e().globalData.eyUrl+"member/getProfile").then((e=>{let a=e.data;"1"==a.code?(t.member=a.data,l("myInfo",a.data)):s({icon:"none",title:a.msg})}))},editProfile(){if(String(this.member.sign).length<2||String(this.member.sign).length>100)return void s({icon:"none",title:"个人广告不符合规范"});let t=this;p(e().globalData.eyUrl+"member/setProfile",this.member).then((e=>{let a=e.data;if("1"==a.code){s({icon:"none",title:"个人资料修改成功"});var l={};l.sign=t.member.sign,t.upMyAuth(l),setTimeout((function(){n()}),1500)}else s({icon:"none",title:a.msg})}))}}},[["render",function(e,t,a,l,s,n){const h=c,p=d,b=g;return o(),i(u,null,[r(p,{class:"content"},{default:m((()=>[r(p,{class:"list"},{default:m((()=>[r(p,{class:"list-call"},{default:m((()=>[f(" 个人广告： "),r(h,{class:"sl-input",modelValue:s.member.sign,"onUpdate:modelValue":t[0]||(t[0]=e=>s.member.sign=e),type:"text",placeholder:"请输入个人广告"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),r(b,{type:"primary",onClick:n.editProfile},{default:m((()=>[f("修 改")])),_:1},8,["onClick"])],64)}],["__scopeId","data-v-41dffeea"]]);export{y as default};
