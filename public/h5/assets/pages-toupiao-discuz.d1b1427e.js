import{j as t,x as n,l as e,H as i,o,c as a,w as s,i as l,f as u,g as r,N as c,z as p,p as d}from"./index-be7fe8a3.js";import{_ as f}from"./uni-section.f9bbaa6a.js";import{r as m}from"./uni-app.es.63fa007f.js";import{_ as g}from"./uni-fab.ad1d44b0.js";import{p as h}from"./util.ff018e21.js";import{_ as I}from"./_plugin-vue_export-helper.1b428a4d.js";import"./uni-icons.43709c62.js";const v=I({data:()=>({voteInfo:{},disInfo:{content:""},actMenu:t().globalData.actMenu}),onLoad(t){this.voteInfo=JSON.parse(t.e)},methods:{clickActMenu(t){n({url:this.actMenu[t.index].route})},input(t){this.disInfo.content=t.detail.value},submitDiscuz(){if(this.disInfo.content.length<2)return void e({icon:"none",title:"内容过少"});let n={module:"vote"};n.id=this.voteInfo.id,n.tag=this.voteInfo.tag,n.content=this.disInfo.content,h(t().globalData.eyUrl+"discuz/setData",n).then((t=>{let n=t.data;"1"==n.code?(e({title:"发表成功"}),i()):"0"==n.code&&e({icon:"none",title:n.msg})}))}}},[["render",function(t,n,e,i,h,I){const v=c,x=p,j=m(d("uni-section"),f),_=m(d("uni-fab"),g),b=l;return o(),a(b,{class:"container"},{default:s((()=>[u(j,{titleFontSize:"18px",title:h.voteInfo.title,type:"line"},{default:s((()=>[u(v,{style:{"min-height":"200px",padding:"10px"},onInput:I.input,maxlength:"500",placeholder:"请详细描述一下您要发布的信息...(500字以内)"},null,8,["onInput"]),u(x,{type:"primary",onClick:n[0]||(n[0]=t=>I.submitDiscuz())},{default:s((()=>[r("我要发布")])),_:1})])),_:1},8,["title"]),u(_,{ref:"fab",content:h.actMenu,onTrigger:I.clickActMenu},null,8,["content","onTrigger"])])),_:1})}]]);export{v as default};
