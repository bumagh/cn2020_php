import{B as e,E as t,l as i,j as n,H as l,y as o,o as a,c,w as s,i as d,f as r,g as u,p as m,z as f,h as p,I as h}from"./index-be7fe8a3.js";import{_ as g}from"./uni-title.5e3efb52.js";import{r as y}from"./uni-app.es.63fa007f.js";import{_}from"./uni-card.431afcaf.js";import{_ as v}from"./uni-section.f9bbaa6a.js";import{p as b,g as k}from"./util.ff018e21.js";import{_ as w}from"./_plugin-vue_export-helper.1b428a4d.js";const j=w({data:()=>({invitcode:"",newcode:"",tip:!0}),onShow(){this.member=e("myAuth")||{},Object.keys(this.member).length<1?t({url:"/pages/member/index"}):this.getMemberInfo()},methods:{clickSetBind(){if(String(this.newcode).length<6||String(this.newcode).length>8)return void i({icon:"none",title:"请输入入6-8位数字邀请码"});let e={};e.newcode=this.newcode,b(n().globalData.eyUrl+"member/setMyInvited",e).then((e=>{let t=e.data;"1"==t.code?(i({title:"绑定成功，正返回。"}),setTimeout((function(){l()}),1500)):i({icon:"none",title:t.msg})}))},clickTip(){let e={};e.invitcode=this.invitcode,b(n().globalData.eyUrl+"message/unMyInvited",e).then((e=>{let t=e.data;"1"==t.code?i({title:"消息已发送",success:function(e){setTimeout((function(){l()}),1e3)}}):"0"==t.code&&i({icon:"none",title:t.msg})}))},clickForceCancel(){let e=this;o({content:"确定消耗500贡献来强制解绑吗？",success:function(t){if(t.confirm){let t={};t.invitcode=e.invitcode,b(n().globalData.eyUrl+"member/forceCancel",t).then((e=>{let t=e.data;"1"==t.code?i({title:"成功解除绑定",success:function(e){setTimeout((function(){l()}),1e3)}}):"0"==t.code&&i({icon:"none",title:t.msg})}))}}})},getMemberInfo(){let e=this;k(n().globalData.eyUrl+"member/getMyInvited").then((t=>{let n=t.data;"1"==n.code?""!=n.data.invitcode&&(e.invitcode=n.data.invitcode):i({icon:"none",title:n.msg})}))}}},[["render",function(e,t,i,n,l,o){const b=y(m("uni-title"),g),k=f,w=p,j=y(m("uni-card"),_),I=y(m("uni-section"),v),C=h,D=d;return a(),c(D,{class:"container"},{default:s((()=>[""!=l.invitcode?(a(),c(I,{key:0,title:"当前已绑定",type:"line"},{default:s((()=>[r(b,{type:"h1",align:"center",title:l.invitcode},null,8,["title"]),r(k,{type:"default",onClick:t[0]||(t[0]=e=>o.clickTip())},{default:s((()=>[u("提醒解绑")])),_:1}),r(k,{type:"primary",onClick:t[1]||(t[1]=e=>o.clickForceCancel())},{default:s((()=>[u("强制解绑")])),_:1}),r(j,{style:{"background-color":"wheat"}},{default:s((()=>[r(w,{class:"uni-h6"},{default:s((()=>[u("可以通过两种方式来解除绑定:\\n1.发送消息给该ID的会员,由对方会员解除对我帐号的绑定;\\n2.可以通过消耗500项献值来强制解除绑定.")])),_:1})])),_:1})])),_:1})):(a(),c(I,{key:1,title:"绑定邀请码",type:"line"},{default:s((()=>[r(D,{class:"list"},{default:s((()=>[r(D,{class:"list-call"},{default:s((()=>[u(" 邀请码： "),r(C,{class:"sl-input",modelValue:l.newcode,"onUpdate:modelValue":t[2]||(t[2]=e=>l.newcode=e),type:"number",placeholder:"请输入邀请码"},null,8,["modelValue"])])),_:1})])),_:1}),r(k,{type:"primary",onClick:t[3]||(t[3]=e=>o.clickSetBind())},{default:s((()=>[u("绑 定")])),_:1})])),_:1}))])),_:1})}],["__scopeId","data-v-daa6f367"]]);export{j as default};
