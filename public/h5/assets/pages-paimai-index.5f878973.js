import{j as t,x as e,y as a,l as n,o as l,c as i,w as u,i as s,f as r,n as c,g as o,a as d,b as p,F as m,d as h,p as f,z as g,A as _,t as b,h as y,u as k}from"./index-be7fe8a3.js";import{_ as x}from"./uni-segmented-control.a6ae5887.js";import{r as C}from"./uni-app.es.63fa007f.js";import{_ as w,a as j,b as A,c as I}from"./uni-table.ea491e78.js";import{_ as v,a as M}from"./uni-row.3ae7a9d0.js";import{_ as T}from"./uni-tag.d4975b95.js";import{_ as D}from"./uni-section.f9bbaa6a.js";import{_ as z}from"./uni-pagination.b2603419.js";import{_ as S}from"./uni-fab.ad1d44b0.js";import{p as U}from"./util.ff018e21.js";import{_ as P}from"./_plugin-vue_export-helper.1b428a4d.js";import"./uni-datetime-picker.650746f4.js";import"./uni-icons.43709c62.js";const R=P({components:{},data:()=>({upUrl:"",myAuth:{},switchtab:{items:["现金","金币","资源"],current:0,colorIndex:0,activeColor:"#007aff",styleType:"button"},cash:{page:0,limit:10},coin:{},resource:{},page:{height:0},actMenu:t().globalData.actMenu}),onLoad(e){let a=this;e.current&&(a.switchtab.current=parseInt(e.current)),a.upUrl=t().globalData.upUrl,a.page.height=t().globalData.page.height-265},onShow(){this.myAuth=t().globalData.myAuth,this.getPaiMai(this.switchtab.current)},methods:{clickActMenu(t){e({url:this.actMenu[t.index].route})},changeCash(t){this.cash.page=t.current,this.getPaiMai(this.cash.tag)},clickCashJoin(l,i){let u=this,s=l.numb?parseInt(l.numb):parseInt(l.numbmin);a({editable:!0,title:"竞拍不得少于"+String(s)+"金币",content:l.numb?String(s+1):l.numbmin,placeholderText:"请输入您的竞拍金币数额",success:function(a){if(a.confirm){let s=parseInt(a.content);if(s<parseInt(l.numbmin)||s<=parseInt(l.numb))return n({icon:"none",title:"竞价过低"}),!1;let r={};r.id=l.id,r.numb=a.content,U(t().globalData.eyUrl+"paimai/join",r).then((a=>{let l=a.data;"1"==l.code?(u.cash.data[i].uid=l.data.uid,u.cash.data[i].name=l.data.name,u.cash.data[i].avatar=l.data.avatar,u.cash.data[i].numb=l.data.numb,n({title:"参与竞拍成功!"})):"0"==l.code?n({icon:"none",title:l.msg}):"-1"==l.code&&(t().globalData.myAuth={},n({icon:"none",title:l.msg}),e({url:"/pages/member/index"}))}))}}})},clickCashApply(){},clickCoinApply(){},clickResourceApply(){},getPaiMai(e){let a=this,n={};0==e&&(n.tag=e,n.limit=a.cash.limit,n.page=a.cash.page,n.count=a.cash.count),U(t().globalData.eyUrl+"paimai/getData",n).then((t=>{let n=t.data;"1"==n.code&&(0==e?a.cash=n:1==e?a.coin=n:2==e&&(a.resource=n))}))},onClickTab(t){this.switchtab.current!==t.currentIndex&&(this.switchtab.current=t.currentIndex,this.getPaiMai(t.currentIndex))}}},[["render",function(t,e,a,n,U,P){const R=C(f("uni-segmented-control"),x),F=C(f("uni-th"),w),J=C(f("uni-tr"),j),B=C(f("uni-col"),v),E=y,G=s,H=g,L=C(f("uni-tag"),T),q=C(f("uni-row"),M),K=C(f("uni-td"),A),N=k,O=C(f("uni-table"),I),Q=_,V=C(f("uni-section"),D),W=C(f("uni-pagination"),z),X=C(f("uni-fab"),S);return l(),i(G,{class:"container"},{default:u((()=>[r(R,{current:U.switchtab.current,values:U.switchtab.items,onClickItem:P.onClickTab},null,8,["current","values","onClickItem"]),r(G,{class:"content"},{default:u((()=>[0===U.switchtab.current?(l(),i(G,{key:0},{default:u((()=>[r(V,{title:"现金","sub-title":"说明：每天拍卖截至时间晚上10点，竞拍自己填数字，少于现价无效。",type:"line"},{default:u((()=>[r(Q,{"scroll-y":"true",style:c("height:"+U.page.height+"px")},{default:u((()=>[r(O,{border:"",stripe:"",emptyText:"暂无更多数据"},{default:u((()=>[r(J,null,{default:u((()=>[r(F,{align:"center",width:"200px"},{default:u((()=>[o("名称")])),_:1}),r(F,{align:"center"},{default:u((()=>[o("最高竞价")])),_:1})])),_:1}),(l(!0),d(m,null,p(U.cash.data,((t,e)=>(l(),i(J,{key:e},{default:u((()=>[r(K,null,{default:u((()=>[r(q,{style:{height:"24px","line-height":"24px"}},{default:u((()=>[r(B,{span:24},{default:u((()=>[o(" #"+b(t.id)+" "+b(t.title),1)])),_:2},1024),r(B,{span:14},{default:u((()=>[r(G,null,{default:u((()=>[o("起拍:"),r(E,{class:"numb"},{default:u((()=>[o(b(t.numbmin),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),r(B,{span:10},{default:u((()=>[t.uid!=U.myAuth.uid&&"0"==t.status?(l(),i(H,{key:0,class:"mini-btn",onClick:a=>P.clickCashJoin(t,e),plain:"true",type:"primary",size:"mini"},{default:u((()=>[o("竞 拍")])),_:2},1032,["onClick"])):(l(),i(G,{key:1,class:"tag-view"},{default:u((()=>[r(L,{inverted:!0,text:"已结束"})])),_:1}))])),_:2},1024)])),_:2},1024)])),_:2},1024),r(K,null,{default:u((()=>[t.numb?(l(),i(G,{key:0,class:"member_head"},{default:u((()=>[r(N,{class:"member_avatar",src:U.upUrl+t.avatar,mode:""},null,8,["src"]),r(G,{class:"member_info"},{default:u((()=>[r(G,{class:"member_name"},{default:u((()=>[o(b(t.name),1)])),_:2},1024),r(G,{class:"member_sign"},{default:u((()=>[o("竞价:"),r(E,{class:"numb"},{default:u((()=>[o(b(t.numb),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)):(l(),i(G,{key:1},{default:u((()=>[o("虚位以待")])),_:1}))])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["style"])])),_:1}),r(G,{style:{padding:"15px"}},{default:u((()=>[r(W,{onChange:P.changeCash,total:U.cash.count,pageSize:U.cash.limit},null,8,["onChange","total","pageSize"])])),_:1})])),_:1})):h("",!0),1===U.switchtab.current?(l(),i(G,{key:1},{default:u((()=>[r(V,{title:"金币","sub-title":"",type:"line"},{default:u((()=>[r(O,{border:"",stripe:"",emptyText:"暂无更多数据"},{default:u((()=>[r(J,null,{default:u((()=>[r(F,{align:"center",width:"200px"},{default:u((()=>[o("名称")])),_:1}),r(F,{align:"center"},{default:u((()=>[o("最高竞价")])),_:1})])),_:1}),(l(!0),d(m,null,p(U.coin.data,((t,e)=>(l(),i(J,{key:e},{default:u((()=>[r(K,null,{default:u((()=>[o(b(t.id),1)])),_:2},1024),r(K,null,{default:u((()=>[o(b(t.name),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),r(G,{style:{padding:"15px"}},{default:u((()=>[r(W,{onChange:t.changeCoin,total:U.coin.count,pageSize:10,title:"标题文字"},null,8,["onChange","total"])])),_:1}),r(H,{type:"primary",onClick:e[0]||(e[0]=t=>P.clickCoinApply())},{default:u((()=>[o("我要发布")])),_:1})])),_:1})):h("",!0),2===U.switchtab.current?(l(),i(G,{key:2},{default:u((()=>[r(V,{title:"资源","sub-title":"",type:"line"},{default:u((()=>[r(O,{border:"",stripe:"",emptyText:"暂无更多数据"},{default:u((()=>[r(J,null,{default:u((()=>[r(F,{align:"center",width:"200px"},{default:u((()=>[o("名称")])),_:1}),r(F,{align:"center"},{default:u((()=>[o("最高竞价")])),_:1})])),_:1}),(l(!0),d(m,null,p(U.resource.data,((t,e)=>(l(),i(G,{key:e},{default:u((()=>[r(J,null,{default:u((()=>[r(K,null,{default:u((()=>[o(b(t.id),1)])),_:2},1024),r(K,null,{default:u((()=>[o(b(t.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),r(G,{style:{padding:"15px"}},{default:u((()=>[r(W,{onChange:t.changeResource,total:U.resource.count,pageSize:10,title:"标题文字"},null,8,["onChange","total"])])),_:1}),r(H,{type:"primary",onClick:e[1]||(e[1]=t=>P.clickResourceApply())},{default:u((()=>[o("我要发布")])),_:1})])),_:1})):h("",!0)])),_:1}),r(X,{ref:"fab",content:U.actMenu,onTrigger:P.clickActMenu},null,8,["content","onTrigger"])])),_:1})}],["__scopeId","data-v-6efb47d0"]]);export{R as default};
